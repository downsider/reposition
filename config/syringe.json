{
  "parameters": {
    "mongo.server": "",
    "mongo.dbName": "",
    "repository.namespaces": [],
    "repository.instances": []
  },

  "services": {
    "mongo.client": {
      "class": "\\MongoClient",
      "arguments": [
        "%mongo.server%"
      ]
    },

    "mongo.db": {
      "class": "\\MongoDB",
      "factoryService": "@mongo.client",
      "factoryMethod": "selectDB",
      "arguments": [
        "%mongo.dbName%"
      ]
    },

    "queryBuilder": {
      "class": "Silktide\\Reposition\\QueryBuilder\\QueryBuilder"
    },

    "mongo.interpreter": {
      "class": "Silktide\\Reposition\\QueryInterpreter\\MongoQueryInterpreter"
    },

    "clay.hydrator": {
      "class": "Silktide\\Reposition\\Hydrator\\ClayHydrator"
    },

    "mongo.normaliser": {
      "class": "Silktide\\Reposition\\Normaliser\\MongoNormaliser"
    },

    "mongo.storage": {
      "class": "Silktide\\Reposition\\Storage\\MongoStorage",
      "arguments": [
        "@mongo.db",
        "@queryBuilder",
        "@mongo.interpreter",
        "@clay.hydrator",
        "@mongo.normaliser"
      ]
    },

    "mongo.repositoryManager": {
      "class": "Silktide\\Reposition\\Repository\\RepositoryManager",
      "arguments": [
        "@mongo.storage",
        "%repository.namespaces%",
        "%repository.instances%"
      ]
    }
  }

}